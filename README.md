# Google Maps

# 1. –¢–µ–º–∞ –∏ —Ü–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è

### **–¢–µ–º–∞ –ø—Ä–æ–µ–∫—Ç–∞**

Google Maps ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏, –º–∞—Ä—à—Ä—É—Ç–∞—Ö, –ø—Ä–æ–±–∫–∞—Ö –∏ –ø–∞–Ω–æ—Ä–∞–º–∞—Ö —É–ª–∏—Ü.

### –ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- **2B+ MAU**[^2]
- **95% —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –≤–µ–±-—Å–∞–π—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, 4% ‚Äî –Ω–∞ –ø–∫**[^1]
- **—Å—Ä–µ–¥–Ω—è—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–µ—â–µ–Ω–∏—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏ ‚Äî 24 —Å–µ–∫—É–Ω–¥—ã** [^1]
- **–¥–æ—Å—Ç—É–ø–Ω–æ –≤ 250+ —Å—Ç—Ä–∞–Ω–∞—Ö**[^2]
- **250M+ –±–∏–∑–Ω–µ—Å–æ–≤ –∏ –º–µ—Å—Ç**[^2]
- **100M+ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å** [^2]
- **(–ø–æ –°–®–ê) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º Google Maps –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º 50 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü, –≤ —Å—Ä–µ–¥–Ω–µ–º —Å–µ—Å—Å–∏—è –¥–ª–∏—Ç—Å—è 3 –º–∏–Ω—É—Ç—ã**[^3]
- **500M –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–æ–±–∞–≤–ª—è—é—Ç –Ω–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∫–∞–∂–¥—ã–π –≥–æ–¥**[^4]
- **–ó–∞ –º–∞–π 2023 –≥–æ–¥–∞ —Å–∞–π—Ç Google Maps –ø–æ—Å–µ—Ç–∏–ª–∏ 196.8 –º–ª–Ω —Ä–∞–∑**[^5]
- **–í —Å—Ä–µ–¥–Ω–µ–º –∑–∞ –¥–µ–Ω—å –≤ Google Play –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–∫–∞—á–∏–≤–∞—é—Ç –æ–∫–æ–ª–æ 7 –º–ª–Ω —Ä–∞–∑**[^6]
- **Google Maps –≤ —Å—Ä–µ–¥–Ω–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–∫–æ–ª–æ 5-10 MB –¥–∞–Ω–Ω—ã—Ö –∑–∞ –∫–∞–∂–¥—ã–π —á–∞—Å –ø–æ–µ–∑–¥–∫–∏**[^7]

### **–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è**

#### –¢—Ä–∞—Ñ–∏–∫ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º

##### Mobile

![–¢—Ä–∞—Ñ–∏–∫ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö](assets/mobile-traffic.png)

##### Desktop

![–¢—Ä–∞—Ñ–∏–∫ –ø–æ —Å—Ç—Ä–∞–Ω–∞–º –Ω–∞ –ü–ö](assets/desktop-traffic.png)

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª MVP

### **–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ MVP**

1. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã**
2. **–ü–æ–∏—Å–∫ –º–µ—Å—Ç –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π**
3. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤**
4. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
5. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö**

---

## –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–∞–≥—Ä—É–∑–∫–∞) –∫–∞—Ä—Ç** ‚Äî –æ—Ñ—Ñ–ª–∞–π–Ω-–¥–æ—Å—Ç—É–ø –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞.

---

# 2. –†–∞—Å—á–µ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏

## –ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- 2B MAU[^2]
- –ó–Ω–∞—è Stickiness = 30%[^3], –ø–æ—Å—á–∏—Ç–∞–µ–º DAU = MAU \* 0,3 = 600M

–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —Ç–∏–ø–∞–º –≤ –¥–µ–Ω—å:

| **–î–µ–π—Å—Ç–≤–∏–µ**                        | **–°—Ä–µ–¥–Ω–µ–µ —á–∏—Å–ª–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –∑–∞ –¥–µ–Ω—å** | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                                                                                                                                                                                                           |
| ----------------------------------- | ------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã**               | **2,5**                              | –ö–∞—Ä—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í —Å—Ä–µ–¥–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Google Maps –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ 50 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü[^3], —Ç. –µ. ‚âà 1,67 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å. –£—á–∏—Ç—ã–≤–∞–µ–º, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –∫–∞—Ä—Ç—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞ –æ–¥–Ω—É —Å–µ—Å—Å–∏—é, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏–Ω–∏–º–∞–µ–º **2,5 –¥–µ–π—Å—Ç–≤–∏—è** –≤ –¥–µ–Ω—å. |
| **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—Å—Ç–∞—Ö** | **3,34**                             | –í —Å—Ä–µ–¥–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –æ –º–µ—Å—Ç–∞—Ö **2 —Ä–∞–∑–∞ –∑–∞ —Å–µ—Å—Å–∏—é**. –ï—Å–ª–∏ **1,67 —Å–µ—Å—Å–∏–∏ –≤ –¥–µ–Ω—å**, —Ç–æ —ç—Ç–æ **‚âà3,34 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å**.                                                                                                                                                    |
| **–ü–æ–∏—Å–∫ –º–µ—Å—Ç –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π**        | **2,37**                             | –í **71% —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**[^9] –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–≤–µ—Ä—à–∞—é—Ç –ø–æ–∏—Å–∫. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –∑–∞ —Å–µ—Å—Å–∏—é –ø–æ–∏—Å–∫ —Å–æ–≤–µ—Ä—à–∞—é—Ç 2 —Ä–∞–∑–∞. **1,67 \* 71% \* 2 ‚âà 2,37**.                                                                                                                            |
| **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤**            | **1,25**                             | **75% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**[^9] —Å—Ç—Ä–æ—è—Ç –º–∞—Ä—à—Ä—É—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏. **1,67 \* 0,75 ‚âà 1,25** –º–∞—Ä—à—Ä—É—Ç–∞ –≤ –¥–µ–Ω—å.                                                                                                                                                                                 |
| **–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ñ—Ñ–ª–∞–π–Ω –∫–∞—Ä—Ç**           | **0,017**                            | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞—Ä—Ç—ã —Å–≤–æ–µ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏—Ö. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **‚âà1 —Ä–∞–∑ –≤ 2 –º–µ—Å—è—Ü–∞**, —Ç–æ –µ—Å—Ç—å –≤ –¥–µ–Ω—å **‚âà1/60 = 0,017**.                                                                                                                            |

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

### –•—Ä–∞–Ω–∏–ª–∏—â–µ

#### –ö–∞—Ä—Ç–∞

–ö–∞—Ä—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∏–¥–µ —Ç–∞–π–ª–æ–≤ (—Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–ª–∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö), –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –ø–æ –∫–∞—Ä—Ç–µ. –ü—Ä–∏—á–µ–º —Ç–∞–π–ª—ã –Ω–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∞) –æ–±—ä–µ–º –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º; –±) –¥–æ–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Ç–∞–π–ª–æ–≤ –∏–∑ –≤—Å–µ—Ö —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–∞–ª—ã–µ 1.79%. –ü–æ—ç—Ç–æ–º—É —Ç–∞–π–ª—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏, –∞ –Ω–∞–∏–±–æ–ª–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–π–ª—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è.

–°–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å —Å–∞–π—Ç–∞ OSM[^8] —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 1250 –ì–ë.

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö

| –ü–æ–ª–µ                     | –û–ø–∏—Å–∞–Ω–∏–µ                      | –°—Ä–µ–¥–Ω–∏–π –æ–±—ä–µ–º –Ω–∞ 1 –æ–±—ä–µ–∫—Ç |
| ------------------------ | ----------------------------- | ------------------------- |
| **ID –º–µ—Å—Ç–∞**             | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä      | 16 –±–∞–π—Ç                   |
| **–ù–∞–∑–≤–∞–Ω–∏–µ**             | –¢–µ–∫—Å—Ç (UTF-8)                 | 50 –±–∞–π—Ç                   |
| **–ö–∞—Ç–µ–≥–æ—Ä–∏—è**            | –¢–∏–ø –º–µ—Å—Ç–∞ (–∫–∞—Ñ–µ, –æ—Ç–µ–ª—å, –ø–∞—Ä–∫) | 16 –±–∞–π—Ç                   |
| **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (lat/lon)** | –î–≤–∞ float-—á–∏—Å–ª–∞               | 16 –±–∞–π—Ç                   |
| **–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã**          | JSON-–æ–±—ä–µ–∫—Ç                   | 200 –±–∞–π—Ç                  |
| **–û—Ç–∑—ã–≤—ã**               | –°–ø–∏—Å–æ–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö       | ~1 –ö–ë (–ø–æ 10 –æ—Ç–∑—ã–≤–æ–≤)     |
| **–†–µ–π—Ç–∏–Ω–≥**              | –ß–∏—Å–ª–æ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π      | 8 –±–∞–π—Ç                    |
| **–î–æ–ø. –¥–∞–Ω–Ω—ã–µ**          | –¢–µ–ª–µ—Ñ–æ–Ω, —Å–∞–π—Ç, —Å–æ—Ü—Å–µ—Ç–∏        | 200 –±–∞–π—Ç                  |

## **–ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**

| **–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö**          | **–ö–æ–ª-–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤** | **–†–∞–∑–º–µ—Ä 1 –æ–±—ä–µ–∫—Ç–∞** | **–û–±—â–∏–π –æ–±—ä–µ–º** |
| ----------------------- | ------------------- | -------------------- | --------------- |
| **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö** | ~250 –º–ª–Ω[^2]        | ~3 –ö–ë                | ~720 –ì–ë         |
| **–†–∞–∑–º–µ—Ä –∫—ç—à–∞**         |                     |                      | ~1250 –ì–ë        |

### –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫

| **–¢–∏–ø —Ç—Ä–∞—Ñ–∏–∫–∞**          | **–†–∞–∑–º–µ—Ä 1 –∑–∞–ø—Ä–æ—Å–∞ (–ú–ë)**                                                                           | **Average RPS**                                                        | Peak RPS  | **–ü–∏–∫–æ–≤—ã–π —Ç—Ä–∞—Ñ–∏–∫** |
| ------------------------ | --------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------- | --------- | ------------------ |
| **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö**  | 0,003 –ú–ë                                                                                            | 2,5 (–¥–µ–π—Å—Ç–≤–∏–π –≤ —Å—É—Ç–∫–∏) / 86400 (—Å–µ–∫—É–Ω–¥ –≤ —Å—É—Ç–∫–∞—Ö) \* 600M DAU ‚âà `17.4K` | **34.8K** | **835 –ú–±–∏—Ç/—Å**     |
| **–ü–æ–∏—Å–∫ –º–µ—Å—Ç**           | 100 –±–∞–π—Ç (–∑–∞–ø—Ä–æ—Å) \* 10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ = 1 –ö–ë                                                          | 2,37 / 86400 \* 600M ‚âà `16.5K`                                         | **33K**   | **258 –ú–±–∏—Ç/—Å**     |
| **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤** | –í–æ–∑—å–º–µ–º –º–∞—Ä—à—Ä—É—Ç –≤ 10 –∫–º: –≤–æ–∑–º–æ–∂–Ω–æ 200 —Ç–æ—á–µ–∫ \* 16 –±–∞–π—Ç = 3,2 –ö–ë + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç–∞ 2 –ö–ë = 5,2 –ö–ë | 1,25 / 86400 \* 600M ‚âà `8.7K`                                          | **17.4K** | **707 –ú–±–∏—Ç/—Å**     |
| **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã**    | –ø—Ä–∏ —ç–∫—Ä–∞–Ω–µ 1080p –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ 16 —É—Ä–æ–≤–Ω—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è 9-12 —Ç–∞–π–ª–æ–≤ –∑–∞ —Ä–∞–∑. 12 \* 0,6 = 7,2 –ö–ë   | 2,5 / 86400 \* 600M ‚âà `17.4K`                                          | **34.8K** | **19 –ì–±–∏—Ç/—Å**      |

# 3. –ì–ª–æ–±–∞–ª—å–Ω–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

## –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –î–¶ (–≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏)

–í–æ–∑—å–º–µ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Å—Ç—Ä–∞–Ω–∞–º —Å —Å–∞–π—Ç–∞ hypestat[^10]:

–ò–∑ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –¥–µ–ª–∞–µ–º –≤—ã–≤–æ–¥, —á—Ç–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –°–®–ê. –ü–æ—Å–ª–µ –∏–¥—É—Ç –ò–Ω–¥–∏—è, –ö–∏—Ç–∞–π, –ë—Ä–∞–∑–∏–ª–∏—è –∏ –Ø–ø–æ–Ω–∏—è.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ª–æ–≥–∏—á–Ω–µ–µ –≤—Å–µ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–∏—Ç—å –î–¶ –≤ –∫—Ä—É–ø–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –≤—ã—à–µ —Å—Ç—Ä–∞–Ω:

- –°–®–ê, –ù—å—é-–ô–æ—Ä–∫ (–í–æ—Å—Ç–æ–∫ –°–®–ê)
- –°–®–ê, –õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å (–ó–∞–ø–∞–¥ –°–®–ê)
- –°–®–ê, –ß–∏–∫–∞–≥–æ (–°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥ –°–®–ê)
- –§—Ä–∞–Ω—Ñ—É—Ä—Ç-–Ω–∞-–ú–∞–π–Ω–µ, –ì–µ—Ä–º–∞–Ω–∏—è
- –ò–Ω–¥–∏—è, –ú—É–º–±–∞–∏
- –ö–∏—Ç–∞–π, –ü–µ–∫–∏–Ω
- –ë—Ä–∞–∑–∏–ª–∏—è, –°–∞–Ω-–ü–∞—É–ª—É
- –Ø–ø–æ–Ω–∏—è, –¢–æ–∫–∏–æ

![alt text](assets/data-centers-on-map.png)

| –¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞                        | –ù—å—é-–ô–æ—Ä–∫ | –õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å | –ß–∏–∫–∞–≥–æ | –§—Ä–∞–Ω–∫—Ñ—É—Ä—Ç-–Ω–∞-–ú–∞–π–Ω–µ | –ú—É–º–±–∞–∏ | –ü–µ–∫–∏–Ω | –°–∞–Ω-–ü–∞—É–ª—É | –¢–æ–∫–∏–æ |
| ---------------------------------- | -------- | ------------ | ------ | ------------------ | ------ | ----- | --------- | ----- |
| **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã** (34.8K)      | 1.93K    | 1.93K        | 1.93K  | 5.8K               | 5.8K   | 5.8K  | 5.8K      | 5.8K  |
| **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—Å—Ç–∞—Ö** (34.8K)    | 1.93K    | 1.93K        | 1.93K  | 5.8K               | 5.8K   | 5.8K  | 5.8K      | 5.8K  |
| **–ü–æ–∏—Å–∫ –º–µ—Å—Ç –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π** (33K) | 1.83K    | 1.83K        | 1.83K  | 5.5K               | 5.5K   | 5.5K  | 5.5K      | 5.5K  |
| **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤** (17.4K)   | 0.97K    | 0.97K        | 0.97K  | 2.9K               | 2.9K   | 2.9K  | 2.9K      | 2.9K  |

## –°—Ö–µ–º–∞ DNS –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏

–î–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –ø–æ –º–∏—Ä—É –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è **Geo-Based DNS**. –û–Ω –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –Ω—É–∂–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã.

## –°—Ö–µ–º–∞ Anycast –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏

Anycast ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –æ–¥–∏–Ω IP-–∞–¥—Ä–µ—Å –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–µ—Ä–≤–µ—Ä–∞–º –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö.

Anycast —Å–µ—Ç–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –°–®–ê, —Ç–∞–∫ –∫–∞–∫ –≤ —à—Ç–∞—Ç–∞—Ö —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∞—Ç–∞-—Ü–µ–Ω—Ç–æ–≤. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ç–∏ –±—É–¥–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å –∫ –±–ª–∏–∂–∞–π—à–µ–º—É —É–∑–ª—É, –ø–æ–º–∏–º–æ —ç—Ç–æ–≥–æ –±—É–¥–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è —Ç—Ä–∞—Ñ–∏–∫ —Ç–µ–º —Å–∞–º—ã–º —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å DDoS –∞—Ç–∞–∫–∞–º–∏.

# 4. –õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

–í –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞ –≤—ã–±—Ä–∞–Ω –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ —É—Ä–æ–≤–Ω—è L7, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—ã –∏ –¥–∞–Ω–Ω—ã–µ, –∞ —Ç–∞–∫–∂–µ —Å–∂–∏–º–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.

–í –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ—à–µ–Ω–∏—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è NGINX –±–ª–∞–≥–æ–¥–∞—Ä—è –µ–≥–æ –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≥–∏–±–∫–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤. –í –∫–∞—á–µ—Å—Ç–≤–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å round robin.

### –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

1. Kubernetes –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –æ–¥–Ω–æ–≥–æ –ø–æ–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—ã–π.

2. –î–ª—è –±–æ–ª—å—à–µ–π –æ—Ç–∫–∞–∑–æ–π—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ Kubernetes –±—É–¥—É—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –Ω–∞–≥—Ä—É–∑–∫–µ

3. Kubernetes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Service Discovery –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –∏ –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –∞ –∫–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ.

4. Nginx —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É –æ—Å—Ç–∞–≤—à–∏–º–∏—Å—è —Å–µ—Ä–≤–µ—Ä–∞–º–∏, —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ –æ—Ç–∫–∞–∑–∞ –æ–¥–Ω–æ–≥–æ –∏–∑ –Ω–∏—Ö –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

# 5. –õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞ –ë–î[^11][^12]

![ER Diagram](assets/ER.png)

## –†–∞–∑–º–µ—Ä—ã —Ç–∞–±–ª–∏—Ü

| **–¢–∞–±–ª–∏—Ü–∞**         | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                     | –†–∞–∑–º–µ—Ä –∑–∞–ø–∏—Å–∏ (–±–∞–π—Ç) | –ß–∏—Å–ª–æ –∑–∞–ø–∏—Å–µ–π                       | –û–±—ä–µ–º   |
| ------------------- | ------------------------------------------------------------------------------------------------ | -------------------- | ----------------------------------- | ------- |
| **category**        | –°–æ–¥–µ—Ä–∂–∏—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã, –º–∞–≥–∞–∑–∏–Ω—ã, –ø–∞—Ä–∫–∏)                                   | 18                   | ~100                                | 1.8 KB  |
| **place**           | –û–ø–∏—Å—ã–≤–∞–µ—Ç –º–µ—Å—Ç–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ä–µ–π—Ç–∏–Ω–≥, –∫–æ–Ω—Ç–∞–∫—Ç—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏ —Ç. –¥.)                       | 663                  | 250M[^2]                            | 154 GB  |
| **review**          | –û—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ –º–µ—Å—Ç–∞—Ö (—Ç–µ–∫—Å—Ç, —Ä–µ–π—Ç–∏–Ω–≥)                                                   | 152                  | —á–∏—Å–ª–æ –º–µ—Å—Ç \* 5 –æ—Ç–∑—ã–≤–æ–≤ = 1.25 B    | 177 GB  |
| **user**            | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö (ID, –∏–º—è, email, —Ö–µ—à –ø–∞—Ä–æ–ª—è)                                          | 364                  | 2B                                  | 678 GB  |
| **node**            | –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ (—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞)                                              | 48                   | 9B[^13]                             | 402 GB  |
| **node_tag**        | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —É–∑–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–∑–≤–∞–Ω–∏–µ —É–ª–∏—Ü—ã, –≤—ã—Å–æ—Ç–∞ –∏ —Ç. –¥.)                         | 232                  | 906M[^13]                           | 196 GB  |
| **way**             | –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —É–∑–ª—ã –≤ –ª–∏–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ—Ä–æ–≥–∏, —Ä–µ–∫–∏)                                                 | 16                   | 1B[^13]                             | 15 GB   |
| **way_node**        | –°–≤—è–∑—å –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –∏ –ø—É—Ç—è–º–∏ (–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–∑–ª–æ–≤ –≤ –ø—É—Ç–∏). | 50                   | –ß–∏—Å–ª–æ –ø—É—Ç–µ–π \* 5 —É–∑–ª–æ–≤ –Ω–∞ –ø—É—Ç—å = 5B | 233 GB  |
| **way_tag**         | –•—Ä–∞–Ω–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –ø—É—Ç–µ–π                                                             | 232                  | 2,5M[^13]                           | 553 MB  |
| **relation**        | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ª–æ–∂–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞—Ä—à—Ä—É—Ç—ã, –≥—Ä–∞–Ω–∏—Ü—ã)                           | 16                   | 13M[^13]                            | 198 MB  |
| **relation_tag**    | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è —Å–≤—è–∑–µ–π                                                               | 232                  | 53M[^13]                            | 11.5 GB |
| **relation_member** | –û–ø–∏—Å—ã–≤–∞–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–π (—É–∑–ª—ã, –ø—É—Ç–∏, –¥—Ä—É–≥–∏–µ —Å–≤—è–∑–∏)                                        | 54                   | –ß–∏—Å–ª–æ relation \* 7 members = 91M   | 4.5 GB  |
| **member_type**     | –¢–∏–ø —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ (—É–∑–µ–ª, –ø—É—Ç—å, —Å–≤—è–∑—å)                                                    | 102                  | 3                                   | 306 B   |
| **tile_cache**      | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫—ç—à–µ                                                                                | 44                   | 1.6B[^8]                            | 65.6 GB |

## –ù–∞–≥—Ä—É–∑–∫–∏ (QPS) –Ω–∞ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å

### –ö—ç—à

<details>
  <summary>üß† –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∞–π–ª–æ–≤</summary>

| Zoom  | –ß—Ç–æ –≤–∏–¥–Ω–æ             | –¢–∏–ø–∏—á–Ω—ã–π —é–∑–∫–µ–π—Å                                        | –ü–æ–≤–µ–¥–µ–Ω–∏–µ                 | –î–æ–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ | –í–∑—è—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
| ----- | --------------------- | ------------------------------------------------------ | ------------------------- | ------------- | --------------- |
| 0‚Äì5   | –í–µ—Å—å –º–∏—Ä / –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—ã | –ü–æ—á—Ç–∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã. –¢–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–∞—Ä—Ç—ã. | –û—á–µ–Ω—å —Ä–µ–¥–∫–∏–µ              | ~1%           | 1%              |
| 6‚Äì8   | –°—Ç—Ä–∞–Ω—ã / —Ä–µ–≥–∏–æ–Ω—ã      | –õ—é–¥–∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç —Å—Ç—Ä–∞–Ω—ã, –º–∞—Ä—à—Ä—É—Ç—ã –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏     | –ù–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ            | ~4%           | 4%              |
| 9‚Äì12  | –ì–æ—Ä–æ–¥–∞, —Ä–∞–π–æ–Ω—ã        | **–û—Å–Ω–æ–≤–Ω–æ–π —É—Ä–æ–≤–µ–Ω—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞, –ø–æ–∏—Å–∫–∞**      | –û—Å–Ω–æ–≤–∞ –∫—ç—à–∞               | **65‚Äì75%**    | 70%             |
| 13‚Äì16 | –ö–≤–∞—Ä—Ç–∞–ª—ã, —É–ª–∏—Ü—ã       | –ü–æ–¥—Ä–æ–±–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —É–ª–∏—Ü, —Ä–∞–±–æ—Ç–∞ —Å POI                  | –û—á–µ–Ω—å —á–∞—Å—Ç–æ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ | ~20‚Äì25%       | 23%             |
| 17‚Äì20 | –î–æ–º–∞, –∑–¥–∞–Ω–∏—è          | –ü–æ—á—Ç–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –≤—Ö–æ–¥–æ–≤/—Ç–æ—á–µ–∫   | –£–∑–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏            | ~2‚Äì4%         | 2%              |

**–ò—Ç–æ–≥–æ:** –ü–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å OSM Wiki[^8], —Å 0 –ø–æ 12 —É—Ä–æ–≤–Ω–∏ –º—ã –ø–æ–∫—Ä–æ–µ–º –∫—ç—à–æ–º –Ω–∞ 100%. –¢–æ –µ—Å—Ç—å `cache-hit = 75%` –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–π–¥–µ—Ç –≤ –∫—ç—à –≤–º–µ—Å—Ç–æ –±–¥, –∞ 25% ‚Äî –≤ –ë–î.

</details>

–î–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º —Å–µ—Ä–≤–∏—Å–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–π–ª–æ–≤. –ë—É–¥–µ–º –ø—Ä–∏–º–µ–Ω—è—Ç—å lazy-render —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–∞–π–ª–æ–≤. –°—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞, —Ç–∞–π–ª –∫—ç—à–∏—Ä—É–µ—Ç—Å—è. –¢–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ –≤ –≤–∏–¥–µ —Ñ–∞–π–ª–æ–≤ `/tiles/{z}/{x}/{y}.png`, –∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∏—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–ª—É–∂–µ–±–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ `tile_cache`, –≥–¥–µ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –¥–∞—Ç–∞ —Ä–µ–Ω–¥–µ—Ä–∞ (`rendered_at`), —Å—Ä–æ–∫ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ (`expires_at`).

#### –õ–æ–≥–∏–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

- –ï—Å–ª–∏ —Ç–∞–π–ª –∞–∫—Ç—É–∞–ª–µ–Ω ‚Äî –æ–Ω –æ—Ç–¥–∞–µ—Ç—Å—è –∏–∑ –∫—ç—à–∞.

- –ï—Å–ª–∏ —Ç–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ —É—Å—Ç–∞—Ä–µ–ª ‚Äî –æ–Ω —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è.

#### –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞:

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è `bounding box` –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∏ –¥–ª—è –≤—Å–µ—Ö —Ç–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç—å—é, –≤ `tile_cache` –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –º–µ—Ç–∫–∞ –æ–± —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏–∏. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ —ç—Ç–∏ —Ç–∞–π–ª—ã –±—É–¥—É—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ–Ω—ã.

#### –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ç–∞–π–ª–æ–≤:

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –æ–¥–∏–Ω —Ç–∞–π–ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –∞ —Å–æ—Å–µ–¥–Ω–∏–π ‚Äî —Å—Ç–∞—Ä—ã–µ, –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤–æ—Å–µ–º—å —Å–æ—Å–µ–¥–Ω–∏—Ö —Ç–∞–π–ª–æ–≤. –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö –±—ã–ª –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–µ–Ω –Ω–∞ –±–æ–ª–µ–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –¥–∞–Ω–Ω—ã—Ö, —Ç–µ–∫—É—â–∏–π —Ç–∞–π–ª —Ç–∞–∫–∂–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∑–∞–Ω–æ–≤–æ.

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ—Å–æ—Å—Ç—ã–∫–æ–≤–æ–∫ –º–µ–∂–¥—É —Ç–∞–π–ª–∞–º–∏,

- –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –ø–æ–ª–Ω–æ–π –ø—Ä–µ–¥–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏,

- –∏ —Å–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–∞—Å—Å–æ–≤—ã—Ö —á—Ç–µ–Ω–∏—è—Ö.

### –¢–∞–±–ª–∏—Ü—ã —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

| **–¢–∞–±–ª–∏—Ü–∞**  | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Read QPS | Write QPS |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | --------- |
| **user**     | –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É Google Maps MAU 40% –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ç–æ –µ—Å—Ç—å –æ–±—â–µ–µ —á–∏—Å–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π `2B / 0,4 = 5B`.<br/>**R:**¬†–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏¬†\~ –≤—Ö–æ–¥—è—Ç –≤ –∞–∫–∫–∞—É–Ω—Ç —Ä–∞–∑ –≤ 3 –º–µ—Å—è—Ü–∞, —Ç.–µ. –Ω–∞ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ RPS = `5B / 3 –º–µ—Å = 643`. –ü–æ–º–∏–º–æ —ç—Ç–æ–≥–æ,¬† –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ **–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—Å—Ç–∞—Ö**¬†(34.8K RPS) –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ—Ç–∑—ã–≤—ã, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –∏ –¥–∞–Ω–Ω—ã–µ –æ–± –∞–≤—Ç–æ—Ä–µ –æ—Ç–∑—ã–≤–∞:¬†`34.8K RPS * 5 –æ—Ç–∑—ã–≤–æ–≤ = 174K QPS` <br/>–¢–∞–∫–∂–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è `2B MAU * 50 —Å–µ—Å—Å–∏–π –≤ –º–µ—Å—è—Ü[3] / 1 –º–µ—Å—è—Ü = 38.6K QPS`<br/>**W:** –õ–æ–≥–∏—á–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ –æ —Å–µ–±–µ –∏ –ø–æ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö —á–∏—Ç–∞—é—Ç—Å—è. –í –æ—Å–Ω–æ–≤–Ω–æ–º –º–µ–Ω—è–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—É—Å—Ç—å –∫–∞–∂–¥—ã–µ 2 –≥–æ–¥–∞ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –º–µ–Ω—è—Ç—å –ø–∞—Ä–æ–ª—å => `5B / 2 –≥–æ–¥–∞ = 80 QPS` | 213.2K   | 80        |
| **place**    | **R:**¬†**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö** + **–ü–æ–∏—Å–∫ –º–µ—Å—Ç**¬†= `67.8K`¬†<br/>**W**:`100M` –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∫–∞—Ä—Ç—ã –≤ –¥–µ–Ω—å[^1][^16] / `86 400`¬†= `1 157` QPS                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | 67.8K    | 1 157     |
| **category** | –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Å—Ç –Ω–µ –º–µ–Ω—è—é—Ç—Å—è. –°–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –∏–∑ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö** + **–ü–æ–∏—Å–∫ –º–µ—Å—Ç**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | 67.8K    | 0         |
| **review**   | **R:**¬†–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö `34.8K * 5 –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –º–µ—Å—Ç–æ = 174K`<br/>**W:**¬†–ü–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ—Ç Google[^17] –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Å—Ç–∞–≤–ª—è—é—Ç –º–∏–ª–ª–∏–æ–Ω—ã –æ—Ç–∑—ã–≤–æ–≤ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –í –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç–∞—Ö –æ—Å—Ç–∞–≤–ª—è—é—Ç `37K` –æ—Ç–∑—ã–≤–æ–≤ –≤ –¥–µ–Ω—å[^18]. –£—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ —É –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç \~ 40 –º–ª–Ω MAU[^19], —Ç–æ –ø–æ—Å—á–∏—Ç–∞–≤ –ª–∏–Ω–µ–π–Ω—É—é –ø—Ä–æ–ø–æ—Ä—Ü–∏—é `2B Google Maps / 40M –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç * 37K –æ—Ç–∑—ã–≤–æ–≤ –≤ –¥–µ–Ω—å = 1.85M –æ—Ç–∑—ã–≤–æ–≤/–¥–µ–Ω—å`. –£—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ Google —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ –æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –º–∏–ª–ª–∏–æ–Ω—ã –æ—Ç–∑—ã–≤–æ–≤, –ø—Ä–∏–º–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ `2M/day ‚âà 23 QPS`                                                                                                                                                                                                                                                                                            | 174K     | 23        |

### –¢–∞–±–ª–∏—Ü—ã —Å –≥–µ–æ–¥–∞–Ω–Ω—ã–º–∏

–¢–∞–∫ –∫–∞–∫ —Ç–∞–±–ª–∏—Ü—ã `node`, `node_tag`, `way`, `way_node`, `way_tag`, `relation`, `relation_tag`, `relation_member`, `member_type` –≤—Å–µ –≤–º–µ—Å—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ—Å—Ç–∞—Ö, –ø–æ–∏—Å–∫–µ –º–µ—Å—Ç, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –∫–∞—Ä—Ç—ã. –ü–æ—ç—Ç–æ–º—É R/W QPS —É –Ω–∏—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π.

| **–¢–∞–±–ª–∏—Ü–∞**                                                                                         | Read QPS                                                                                                                                                          | Write QPS                                                                       |
| --------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| `node`, `node_tag`, `way`, `way_node`, `relation`, `relation_tag`, `relation_member`, `member_type` | (`34.8K`) –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö + <br>(`33K`) –ü–æ–∏—Å–∫ –º–µ—Å—Ç + <br>(`17.4K`) –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ +<br>(`34.8K`¬†\* 25% (75% –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –∫—ç—à))¬† –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã = `94K` | `100M` –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∫–∞—Ä—Ç—ã –≤ –¥–µ–Ω—å[^1][^16] / `86 400` (—Å–µ–∫—É–Ω–¥ –≤ –¥–Ω–µ) = `1 157` QPS |

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

- –í —Ç–∞–±–ª–∏—Ü–∞—Ö `place` –∏ `relation_member` –ø–æ–ª–µ `member_id` –º–æ–∂–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –∫–∞–∫ –Ω–∞ node, —Ç–∞–∫ –∏ –Ω–∞ way, –∏–ª–∏ relation. –ü–æ—ç—Ç–æ–º—É `relation`, `node` –∏ `way` –æ–±—è–∑–∞–Ω—ã –∏–º–µ—Ç—å **—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ PK, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º**!
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö `way_node` –∏ `relation_member` –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è `sequence_id` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ `way_id` –∏ `relation_id` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –¢–∞–∫–∂–µ –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è.
- –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π: –ø—Ä–∏ —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö (`–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Å—Ç–∞` = `–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ place` + `–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ node / way / relation`) –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ –∏–ª–∏ –æ—Ç–º–µ–Ω–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é.

# 6. –§–∏–∑–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞ –ë–î

![–§–∏–∑ —Å—Ö–µ–º–∞ –ë–î ER](assets/er-physical.png)

## –í—ã–±–æ—Ä –°–£–ë–î

#### –î–ª—è –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö

–î–ª—è —Ç–∞–±–ª–∏—Ü `node`, `node_tag`, `way`, `way_node`, `way_tag`, `relation`, `relation_tag`, `relation_member`, `member_type` –≤—ã–±—Ä–∞–Ω–∞ –°–£–ë–î PostgreSQL, —Ç–∞–∫ –∫–∞–∫ –≤ –Ω–µ–π –∏–º–µ–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `PostGIS`, –∫–æ—Ç–æ—Ä–∞—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –∏ `pgRouting`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤.

#### –î–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

–î–ª—è —Ç–∞–±–ª–∏—Ü `place`, `category`, `review`, `user` –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –°–£–ë–î Apache Cassandra, —Ç–∞–∫ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ –∫–∞—Ä—Ç–∞—Ö -- —ç—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö –∏ –æ—Ç–∑—ã–≤—ã. –≠—Ç–∞ –°–£–ë–î –∏–º–µ–µ—Ç –æ—Ç–ª–∏—á–Ω—É—é –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –æ–≥—Ä–æ–º–Ω–æ–≥–æ —á–∏—Å–ª–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏.

## –ò–Ω–¥–µ–∫—Å—ã

- **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**:
  - –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `place_on_map`: `CREATE INDEX place_on_map_coord_idx ON place_on_map USING GIST (coord);`
  - –¢–∞–∫ –∫–∞–∫ `node` –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (9B –∑–∞–ø–∏—Å–µ–π), –∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–∫–∞—Ç—å –≤—Å–µ `node`, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ viewport –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, —Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–µ–Ω –∏–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º `node`: `CREATE INDEX node_coord_gist_idx ON node USING GIST (coord)`
- **–û—Ç `node` –∫ —Å–ª–æ–∂–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º (`way` & `relation`)**
  - –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ `way_node` (5B –∑–∞–ø–∏—Å–µ–π) –ø–æ `node_id` —Å–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å: `CREATE INDEX way_node_node_id_idx ON way_node (node_id);
  - –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ `way` –∏–∑ `way_node` –∏ `relation_member` —Å–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å –ø–æ `PK`: `CREATE INDEX way_id_idx ON way (id)`
  - –ù–∞ `node` –∏ `way` —Å—Å—ã–ª–∞–µ—Ç—Å—è `relation_member.member_id`, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å –ø–æ —ç—Ç–æ–º—É –ø–æ–ª—é –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ `relation` –∏ `relation_member` –ø–æ `node_id` –∏ `way_id`: `CREATE INDEX relation_member_member_id_idx ON relation_member (member_id);`
- **–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞**:
  - –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é **GIN –∏–Ω–¥–µ–∫—Å** –¥–ª—è –ø–æ–∏—Å–∫–∞ (–¥–∞–∂–µ —Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏): `CREATE INDEX place_on_map_title_trgm_idx ON place_on_map USING GIN (title gin_trgm_ops)
  - –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Å—Ç–∞ B-tree –∏–Ω–¥–µ–∫—Å –¥–ª—è **—Ç–æ—á–Ω–æ–≥–æ** —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è: `CREATE INDEX place_on_map_category_idx ON place_on_map USING BTREE (category)`
- **–û—Ç —Å–ª–æ–∂–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (`way` & `relation`) –∫ –ø—Ä–æ—Å—Ç—ã–º (`node`)**
  - –ü–æ–∏—Å–∫ –≤—Å–µ—Ö `node` –≤–Ω—É—Ç—Ä–∏ `way`: –ò–Ω–¥–µ–∫—Å –Ω–∞ `way_node.way_id`: `CREATE INDEX way_node_way_idx ON way_node (way_id)
  - –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ `way` –ø–æ PK: —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å `way_id_idx`
  - –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ `node` –ø–æ PK: `CREATE INDEX node_id_idx ON node (id)`
- **–¢–µ–≥–∏**:
  - –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ —Ç–µ–≥–æ–≤ –¥–ª—è —Ç–æ—á–∫–∏ (–Ω–∞–∏–±–æ–ª—å—à–∏–π –æ–±—ä–µ–º –ø–æ —Ç–µ–≥–∞–º —É —Ç–∞–±–ª–∏—Ü—ã `node` –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å `way` & `relation`): –∏–Ω–¥–µ–∫—Å –Ω–∞ `node_tag.node_id`: `CREATE INDEX node_tag_node_idx ON node_tag (node_id)`
  - –ü–æ–∏—Å–∫ —Ç–µ–≥–æ–≤ –ø–æ –∫–ª—é—á—É (B-Tree):
    - `CREATE INDEX node_tag_key_idx ON node_tag (key)`
    - `CREATE INDEX way_tag_key_idx ON way_tag (key)`
    - `CREATE INDEX relation_tag_key_idx ON relation_tag (key)`

## –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –î–ª—è —Ç–∞–±–ª–∏—Ü `node`, `node_tag`, `way`, `way_node`, `relation`, `relation_tag`, `relation_member`, `member_type` –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 50 —Ä–µ–ø–ª–∏–∫ Master-Slave –Ω–∞ —á—Ç–µ–Ω–∏–µ

### –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

- –ö–∞–∫ –º–æ–∂–Ω–æ –±—ã–ª–æ –∑–∞–º–µ—Ç–∏—Ç—å, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü `way_tag`, `relation_tag`, `node_tag` –∏–¥–µ–Ω—Ç–∏—á–Ω–∞. –ü–æ —Å—É—Ç–∏ —ç—Ç–æ 1 —Ç–∞–±–ª–∏—Ü–∞, –Ω–æ –µ–µ –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª–∏–ª–∏ –Ω–∞ —Ç—Ä–∏ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–≥–æ–≤. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç–µ–≥–æ–≤ `way`, –º—ã –Ω–µ –±—É–¥–µ–º –ø—Ä–æ—Ö–æ–¥–∏—Ç—å—Å—è –ø–æ —Ç–µ–≥–∞–º `relation` & `node`.

## –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

- –î–ª—è –±–æ–ª—å—à–µ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã `category`, –∫–∞—Ç–µ–≥–æ—Ä–∏—é –º–µ—Å—Ç–∞ –±—É–¥–µ–º –ø–∏—Å–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ —Ç–∞–±–ª–∏—Ü—É `place`
- –¢–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º –∏–∑–±–∞–≤–∏–º—Å—è –æ—Ç —Ç–∞–±–ª–∏—Ü—ã `member_type`, –∞ `member_type` –±—É–¥–µ–º –Ω–∞–ø—Ä—è–º—É—é –ø–∏—Å–∞—Ç—å –≤ `relation_member`

## –†–∞–∑–º–µ—Ä—ã —Ç–∞–±–ª–∏—Ü –ø–æ—Å–ª–µ –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏

| **–¢–∞–±–ª–∏—Ü–∞**         | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                     | –†–∞–∑–º–µ—Ä –∑–∞–ø–∏—Å–∏ (–±–∞–π—Ç) | –ß–∏—Å–ª–æ –∑–∞–ø–∏—Å–µ–π                       | –û–±—ä–µ–º   |
| ------------------- | ------------------------------------------------------------------------------------------------ | -------------------- | ----------------------------------- | ------- |
| **place**           | –û–ø–∏—Å—ã–≤–∞–µ—Ç –º–µ—Å—Ç–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ä–µ–π—Ç–∏–Ω–≥, –∫–æ–Ω—Ç–∞–∫—Ç—ã, –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏ —Ç. –¥.)                       | 679                  | 250M[^2]                            | 158 GB  |
| **review**          | –û—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ –º–µ—Å—Ç–∞—Ö (—Ç–µ–∫—Å—Ç, —Ä–µ–π—Ç–∏–Ω–≥)                                                   | 152                  | —á–∏—Å–ª–æ –º–µ—Å—Ç \* 5 –æ—Ç–∑—ã–≤–æ–≤ = 1.25 B    | 177 GB  |
| **user**            | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö (ID, –∏–º—è, email, —Ö–µ—à –ø–∞—Ä–æ–ª—è)                                          | 364                  | 2B                                  | 678 GB  |
| **node**            | –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ (—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞)                                              | 48                   | 9B[^13]                             | 402 GB  |
| **node_tag**        | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã —É–∑–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–∑–≤–∞–Ω–∏–µ —É–ª–∏—Ü—ã, –≤—ã—Å–æ—Ç–∞ –∏ —Ç. –¥.)                         | 232                  | 906M[^13]                           | 196 GB  |
| **way**             | –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —É–∑–ª—ã –≤ –ª–∏–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ—Ä–æ–≥–∏, —Ä–µ–∫–∏)                                                 | 16                   | 1B[^13]                             | 15 GB   |
| **way_node**        | –°–≤—è–∑—å –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –∏ –ø—É—Ç—è–º–∏ (–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–∑–ª–æ–≤ –≤ –ø—É—Ç–∏). | 50                   | –ß–∏—Å–ª–æ –ø—É—Ç–µ–π \* 5 —É–∑–ª–æ–≤ –Ω–∞ –ø—É—Ç—å = 5B | 233 GB  |
| **way_tag**         | –•—Ä–∞–Ω–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –ø—É—Ç–µ–π                                                             | 232                  | 2,5M[^13]                           | 553 MB  |
| **relation**        | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ª–æ–∂–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞—Ä—à—Ä—É—Ç—ã, –≥—Ä–∞–Ω–∏—Ü—ã)                           | 16                   | 13M[^13]                            | 198 MB  |
| **relation_tag**    | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è —Å–≤—è–∑–µ–π                                                               | 232                  | 53M[^13]                            | 11.5 GB |
| **relation_member** | –û–ø–∏—Å—ã–≤–∞–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–π (—É–∑–ª—ã, –ø—É—Ç–∏, –¥—Ä—É–≥–∏–µ —Å–≤—è–∑–∏)                                        | 62                   | –ß–∏—Å–ª–æ relation \* 7 members = 91M   | 5.25 GB |
| **tile_cache**      | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫—ç—à–µ                                                                                | 44                   | 1.6B[^8]                            | 65.6 GB |

## –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ / –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ë—ç–∫—ç–Ω–¥ –±—É–¥–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ Go –∏–∑-–∑–∞ –µ–≥–æ –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏.

- PostgreSQL - [pgx](https://github.com/jackc/pgx)
- Apache Cassandra - [Apache Cassandra GoCQL Driver](https://github.com/apache/cassandra-gocql-driver)

## –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ / –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

- PostgreSQL: PgBouncer
- Apache Cassandra: –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥—Ä–∞–π–≤–µ—Ä–∞

## –°—Ö–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

- PostgreSQL: –∫–∞–∂–¥—ã–µ —Å—É—Ç–∫–∏ `pg_basebackup`, –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç `WAL-G`
- Apache Cassandra: –∫–∞–∂–¥—ã–µ —Å—É—Ç–∫–∏ `nodetool snapshot`, –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç `Incremental Commit Logs`

# 7. –ê–ª–≥–æ—Ä–∏—Ç–º—ã

## Metatile[^14]

**MetaTile** ‚Äî —ç—Ç–æ —Ç–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∞–π–ª–æ–≤ –∫–∞—Ä—Ç—ã. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å **–∫–∞–∂–¥—ã–π 256√ó256 —Ç–∞–π–ª –æ—Ç–¥–µ–ª—å–Ω–æ**, —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è **–±–æ–ª—å—à–∞—è –æ–±–ª–∞—Å—Ç—å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, 4√ó4 —Ç–∞–π–ª–∞), –∞ –∑–∞—Ç–µ–º –æ–Ω–∞ —Ä–∞–∑—Ä–µ–∑–∞–µ—Ç—Å—è.

**–ü—Ä–æ–±–ª–µ–º–∞:** —Ç–∞–∫ –∫–∞–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ –∏ –µ—Å–ª–∏ —Ç–∞–π–ª—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏, —Ç–æ —ç—Ç–æ –º–æ–∂–µ—Ç –Ω–∞–≥—Ä—É–∂–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –æ–≥—Ä–æ–º–Ω—ã–º —á–∏—Å–ª–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤ + –ª–∏–Ω–∏–∏, —à—Ä–∏—Ñ—Ç—ã –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö —Ç–∞–π–ª–∞ –º–æ–≥—É—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å

**–†–µ—à–µ–Ω–∏–µ:** –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–∞–∂–¥—ã–π —Ç–∞–π–ª –æ—Ç–¥–µ–ª—å–Ω–æ, —Å–µ—Ä–≤–µ—Ä —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å—Ä–∞–∑—É –±–æ–ª—å—à—É—é –æ–±–ª–∞—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 4√ó4 —Ç–∞–π–ª–∞) –∏ –ø–æ—Ç–æ–º —Ä–∞–∑—Ä–µ–∑–∞–µ—Ç –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏–µ —á–∞—Å—Ç–∏.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. –°–µ—Ä–≤–µ—Ä —Ä–µ–Ω–¥–µ—Ä–∏—Ç **MetaTile (1024x1024 px)**
2. MetaTile **—Ä–∞–∑—Ä–µ–∑–∞–µ—Ç—Å—è** –Ω–∞ 16 –æ–±—ã—á–Ω—ã—Ö —Ç–∞–π–ª–æ–≤ (256√ó256 px)
3. –≠—Ç–∏ —Ç–∞–π–ª—ã **–æ—Ç–¥–∞—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É**

–í –∏—Ç–æ–≥–µ:

- –°–Ω–∏–∂–∞–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ë—ã—Å—Ç—Ä–µ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- –ù–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö —Ç–∞–π–ª–æ–≤

## –†–∞–±–æ—Ç–∞ offline

1. –ö–∞—Ä—Ç–∞ –≤ –≤–∏–¥–µ —Ç–∞–π–ª–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î MBTiles[^15] (SQLite)
2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–∞—Ö (`places` –∏ `places_on_map`) —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π SQLite –ë–î

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞—Ä—Ç—É, —Å–µ—Ä–≤–µ—Ä —Å–∂–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ MBTiles.
–î–µ–≤–∞–π—Å –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç—É –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –∫—ç—à.
–ë–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î.

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è MBTiles

1. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ Mapnik

2. –£–ø–∞–∫–æ–≤–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç .mbtiles —Å –ø–æ–º–æ—â—å—é `mb-util`

# 8. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è       | –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è              | –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —á–∞—Å—Ç—å                                                                                                                                                                                                                                                         |
| ---------------- | ------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Mapnik           | Backend                         | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∞–π–ª–æ–≤                                                                                                                                                                                                                                           |
| tile-join        | Backend                         | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏ —Ç–∞–π–ª–æ–≤ –≤ `.mbtiles`                                                                                                                                                                                                                               |
| TypeScript       | Frontend                        | –°–∫—Ä–∏–ø—Ç–æ–≤—ã–π —è–∑—ã–∫ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤                                                                                                                                                                                           |
| React            | Frontend                        | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏                                                                                                                                                                                              |
| Leaflet          | Frontend                        | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç                                                                                                                                                                                                                                           |
| Kotlin           | –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ            | –∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Android                                                                                                                                                                                            |
| Swift            | –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ            | –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ iOS                                                                                                                                                                                               |
| Golang           | Backend                         | –ü–æ–ø—É–ª—è—Ä–Ω—ã–π –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º—ã–π –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π –Ø–ü –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã—Å–æ–∫–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∏ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞—Ö. –ò–º–µ–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –±–∏–±–ª–∏–æ—Ç–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–∞–∫ —Å –∫–ª–∏–µ–Ω—Ç–æ–º, —Ç–∞–∫ –∏ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. |
| PostgreSQL       | –•—Ä–∞–Ω–µ–Ω–∏–µ –≥–µ–æ –¥–∞–Ω–Ω—ã—Ö             | –°–£–ë–î –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª—å—à–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –≤—ã—Å–æ–∫—É—é –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –∞ —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö                                                                                                                                                                              |
| Apache Cassandra | –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö            | –°–£–ë–î –ø–æ–∑–≤–æ–ª–∏—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±—ã—Å—Ç—Ä—É—é —Å–∫–æ—Ä–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ—à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ                                                                                                                                                                                    |
| Prometheus       | –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫                 | –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–±–æ—Ä–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                                                                                                                                                                                                                       |
| Grafana          | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫             | –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∞—à–±–æ—Ä–¥–æ–≤ –¥–ª—è –ª—É—á—à–µ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫ –∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                                                                                                                                                             |
| Nginx            | Reverse-proxy, load balancer    | –ë—ã—Å—Ç—Ä–æ–µ –∏ –ø–æ–ø—É–ª—è—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤ –æ–±–ª–∞—Å—Ç–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤. –ü–æ–∑–≤–æ–ª–∏—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–ª–∞–≥–æ–¥–∞—Ä—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏.                                                                                                         |
| Git              | –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π         | –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞, —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è                                                                                                                                                                                                                      |
| GitLab           | –•—Ä–∞–Ω–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ | –û—Ç–∫—Ä—ã—Ç–∞—è –∏ —Å–≤–æ–±–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏ –∫–æ–¥–∞. –¢–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–¥–æ–±–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É CI/CD.                                                                                                                                                                     |
| Kubernetes       | –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è        | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.                                                                                                                                                                                    |

# 9. –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç    | –°–ø–æ—Å–æ–±—ã —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è                                                                                                       |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------- |
| nginx        | \* rate limit<br/>\* –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏                                                                                   |
| k8s          | \* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Å–ª—É—á–∞–µ —Å–±–æ—è<br/>\* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤                     |
| Cassandra    | \* –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>\* –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥—Ä–∞–π–≤–µ—Ä–∞                                                   |
| PostgreSQL   | \* –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>\* Master-slave —Ä–µ–ø–ª–∏–∫–∏<br/>\* –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>\* –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è<br/><br/>\* pgBouncer |
| –¢–∞–π–ª–æ–≤—ã–π –∫—ç—à | \* –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∫—ç—à–∏—Ä—É—é—â–∏–µ –Ω–æ–¥—ã –≤ –∫–∞–∂–¥–æ–º —Ä–µ–≥–∏–æ–Ω–µ                                                                              |

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã

- Graceful Shutdown

- Graceful Degradation

- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus + Grafana)

# –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

[^1]: [–ê–Ω–∞–ª–∏–∑ –≤–µ–±-—Ç—Ä–∞—Ñ–∏–∫–∞ maps.google.com](https://www.similarweb.com/website/maps.google.com/#geography)
[^2]: [–ü–æ—á–µ–º—É Google? –°–∞–π—Ç Google —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ Google Maps](https://mapsplatform.google.com/why-google/)
[^3]: [Leading US Map and Navigation Smartphone Apps, Ranked by Monthly Unique Users, Aug 2019](https://www.emarketer.com/chart/234831/leading-us-map-navigation-smartphone-apps-ranked-by-monthly-unique-users-aug-2019)
[^4]: [20 things you didn‚Äôt know you could do with Google Maps](https://blog.google/products/maps/20-years-google-maps-20-features/)
[^5]: [Google Maps Statistics 2024 By Usage, Revenue, Accuracy, Traffic Data, Trends, Web Usage and API Usage](https://www.enterpriseappstoday.com/stats/google-maps-statistics.html#:~:text=Google%20Maps%20website%20had%20a%20record%20number%20of%20visits.%20Google%20Maps%20website%20had%20around%20196.8%20million%20visits%20total%20in%20May%202023.)
[^6]: [Google Maps on AppBrain](https://www.appbrain.com/app/google-maps/com.google.android.apps.maps)
[^7]: [–°–∫–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç Google Maps?](https://truely.com/blog/how-much-data-does-google-maps-use#:~:text=with%20Standard%20Mode-,5%2D10%20MB,-Navigation%20with%20Traffic)
[^8]: [OSM Wiki: Tile disk usage](https://wiki.openstreetmap.org/wiki/Tile_disk_usage)
[^9]: [–ö–∞–∫ —á–∞—Å—Ç–æ —Ä–æ—Å—Å–∏—è–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≥–µ–æ—Å–µ—Ä–≤–∏—Å—ã](https://iom.anketolog.ru/2020/02/12/geoservisy)
[^10]: [HypeStat: Google Maps](https://hypestat.com/info/maps.google.com)
[^11]: [OSM: DB Schema](https://wiki.openstreetmap.org/wiki/Openstreetmap-website/Database_schema)
[^12]: [OSM: –≠–ª–µ–º–µ–Ω—Ç—ã](https://wiki.openstreetmap.org/wiki/RU:%D0%AD%D0%BB%D0%B5%D0%BC%D0%B5%D0%BD%D1%82%D1%8B)
[^13]: [OSM: taginfo](https://taginfo.openstreetmap.org/sources/db)
[^14]: [OSM Wiki: Meta Tiles](https://wiki.openstreetmap.org/wiki/Meta_tiles)
[^15]: [OSM Wiki: MBTiles](https://wiki.openstreetmap.org/wiki/MBTiles)
[^16]: [Google Maps Platform: Build with the power and scale of Google Maps](https://mapsplatform.google.com/resources/blog/places-insights-api-now-in-preview/#:~:text=With%20100%20million%20updates%20to%20the%20map%20every%20day)
[^17]: [How reviews on Google Maps work](https://blog.google/products/maps/how-google-maps-reviews-work/#:~:text=With%20millions%20of%20reviews%20posted%20every%20day%20from%20people%20around%20the%20world)
[^18]: [–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –Ø–Ω–¥–µ–∫—Å–∞ ‚Äî –ö–∞–∫ —Ö–≤–∞–ª—è—Ç –∏ —Ä—É–≥–∞—é—Ç —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã –∏ –±–∞—Ä—ã](https://yandex.ru/company/researches/2023/orgs-reviews#:~:text=%D0%AF%D0%BD%D0%B4%D0%B5%D0%BA%D1%81%20%D0%9A%D0%B0%D1%80%D1%82%D1%8B%20%D0%B5%D0%B6%D0%B5%D0%B4%D0%BD%D0%B5%D0%B2%D0%BD%D0%BE%20%D1%81%D0%BE%D0%B1%D0%B8%D1%80%D0%B0%D1%8E%D1%82%2037%20%D1%82%D1%8B%D1%81%D1%8F%D1%87%20%D0%BE%D1%82%D0%B7%D1%8B%D0%B2%D0%BE%D0%B2)
[^19]: [–ü–æ –ø—É—Ç–∏ —Å —Ä–µ–∫–ª–∞–º–æ–π: –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≥–µ–æ–º–µ–¥–∏–π–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–ª—è –µ—â—ë –±–æ–ª—å—à–µ–≥–æ –æ—Ö–≤–∞—Ç–∞ ‚Äî –ù–æ–≤–æ—Å—Ç–∏ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –Ø–Ω–¥–µ–∫—Å–∞](https://yandex.ru/adv/news/po-puti-s-reklamoy-novye-vozmozhnosti-geomediynykh-formatov-dlya-esche-bolshego-okhvata#:~:text=%D0%9F%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%9A%D0%B0%D1%80%D1%82%20%D0%B8%C2%A0%D0%9D%D0%B0%D0%B2%D0%B8%D0%B3%D0%B0%D1%82%D0%BE%D1%80%D0%B0%C2%A0%E2%80%94%20%D1%81%D0%B0%D0%BC%D1%8B%D0%B5%20%D0%BE%D1%85%D0%B2%D0%B0%D1%82%D0%BD%D1%8B%D0%B5%20%D0%B8%D0%B7%C2%A0%D0%93%D0%B5%D0%BE%D1%81%D0%B5%D1%80%D0%B2%D0%B8%D1%81%D0%BE%D0%B2.%20%D0%98%D1%85%C2%A0%D0%B5%D0%B6%D0%B5%D0%BC%D0%B5%D1%81%D1%8F%D1%87%D0%BD%D0%B0%D1%8F%20%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D0%B0%D1%8F%20%D0%B0%D1%83%D0%B4%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D1%8F%20%D1%81%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%BB%D1%8F%D0%B5%D1%82%2037)
